<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<title> Some basic Ruby &middot; Hank&#39;s Blog </title>


<link rel="stylesheet" href="http://zhengyhn.github.io//css/slim.css">
<link rel="stylesheet" href="http://zhengyhn.github.io//css/highlight.min.css">
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro' rel='stylesheet' type='text/css'>

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="/favicon.ico">


<link href="" rel="alternate" type="application/rss+xml" title="Hank&#39;s Blog" />

</head>

<body>
  <div class="container">
    <div class="header">
  <h1 class="site-title"><a href="http://zhengyhn.github.io/">Hank&#39;s Blog</a></h1>
  <p class="site-tagline">坚持做一件事，然后静静地等待时间的回报</p>
  <div class="nav">
    <a class="nav-btn" href="#">
      <span class="ci ci-burger"></span>
    </a>
    <ul class="nav-list">
       
	  <li class="spacer">&ac;</li>

      <li><a href="https://github.com/zhengyhn">Github</a></li>  
    </ul>
  </div>
</div>
    <div class="content">
      <div class="posts">
        <div class="post">
          <h2 class="post-title"><a href="http://zhengyhn.github.io/post/2013-07-25-some-basic-ruby/">Some basic Ruby</a></h2>
          <span class="post-date">May 14, 2016 </span>
          <div class="post-content">
            

<h2 id="string-and-name">String and name</h2>

<p>When defining a function, the parentheses are not necessary.So this one</p>

<pre><code>def say_hello name
  &quot;Hello &quot; + name
end

puts say_hello &quot;man&quot;
</code></pre>

<p>is the same as this.</p>

<pre><code>def say_hello(name)
  &quot;Hello &quot; + name
end

puts(say_hello(&quot;man&quot;))
</code></pre>

<p>However, when there are more than one parameters, it will be difficult to
know which argument goes with which method invocation.So it&rsquo;s recommended
using parentheses in all but the simplest cases.</p>

<p>We can use single-quote or double-quote to create a string.What&rsquo;s the
difference?</p>

<p>First, single-quoted string can&rsquo;t represent the escape character, and
double-quoted string can.</p>

<pre><code>puts '\nabc'
puts &quot;\nabc&quot;
</code></pre>

<p>The above code will output this.</p>

<pre><code>\nabc

abc
</code></pre>

<p>Second, double-quoted string can be expression interpolated.</p>

<pre><code>name = 'Tom'

puts 'Hello #{name}'
puts &quot;Hello #{name}&quot;
</code></pre>

<p>The above code will output this.</p>

<pre><code>ruby test.rb
Hello #{name}
Hello Tom
</code></pre>

<p>And we can even invoke methods.</p>

<pre><code>name = 'Tom'
puts &quot;Hello #{name.upcase}&quot;
</code></pre>

<p>This will generate the following.</p>

<pre><code>Hello TOM
</code></pre>

<p>When the expression is a global, instance or class variable, there is no need
to use the braces.</p>

<pre><code>@h = &quot;Hello&quot;    # @ means instance
$name = 'Tom'    # $ means global

puts &quot;#@h #$name&quot;
</code></pre>

<p>This will generate the same output.</p>

<p>There are some conventions for the <strong>name</strong> in Ruby.</p>

<ul>
<li><p>Local variables, method parameters and method names <em>should</em> all start
with a lowercase letter or an underscore.</p></li>

<li><p>Class names, module names and constants <em>must</em> start with an uppercase
letter.</p></li>

<li><p>Global variables start with <code>$</code>.</p></li>

<li><p>Instance variables begin with <code>@</code>.</p></li>

<li><p>Class variables are prefixed with <code>@@</code>.</p></li>
</ul>

<h2 id="arrays-and-hashes">Arrays and Hashes</h2>

<p>In ruby, arrays and hashes can hold objects of different types.</p>

<pre><code>a = [1, 'abc', :sym]
puts a
</code></pre>

<p>It will generate the following output.</p>

<pre><code>1
abc
sym
</code></pre>

<p>By the way, <code>nil</code> is an object, represent <strong>nothing</strong>.</p>

<p>If we want to create an array of string, we have to list all the strings.
And we have to type lots of quotes and commas.However, <code>%w</code> can do it
more easily.</p>

<pre><code>a = ['a', 'b', 'c']
b = %w{a b c}

puts a
puts b
</code></pre>

<p>It will generate the following output.</p>

<pre><code>a
b
c
a
b
c
</code></pre>

<p>The index of Array is integer, but the index of Hash is anything.</p>

<p>It has the following form.</p>

<pre><code>var = {
  key1 =&gt; value1
  key2 =&gt; value2
  ...
}
</code></pre>

<p>For example:</p>

<pre><code>girl = {
  :name =&gt; 'Mary',
  :age =&gt; 20
}

puts &quot;#{girl[:name]} is #{girl[:age]} years old.&quot;
</code></pre>

<p>Output:</p>

<pre><code>Mary is 20 years old.
</code></pre>

<p>A new Hash can also be created in this way.</p>

<pre><code>decimal = Hash.new(0)
puts decimal[:first]
decimal[:first] = 1
puts decimal[:first]
</code></pre>

<p>Ouput:</p>

<pre><code>0
1
</code></pre>

<p><code>0</code> is the default value for all keys.</p>

<h2 id="control-structures">Control Structures</h2>

<p>In Ruby, there is a <code>elsif</code> keyword instead of <code>else if</code>.</p>

<p>The method <code>gets</code> return the next line from the standard input stream and
return nil when get the <code>EOF</code>, so the following code can let all the inputs
be upcase.</p>

<pre><code>while line = gets
  puts line.upcase
end
</code></pre>

<p>If the <code>if</code> and <code>while</code> statement is just a single expression, we usually
write them in this way.</p>

<pre><code>puts 'Hey' if 2 &gt; 1

i = 1
puts i while (i += 1) &lt; 10
</code></pre>

<p>Someone say that this style is similar with <code>Perl</code>.</p>

<h2 id="regular-expressions">Regular expressions</h2>

<p>&rsquo;/&rsquo;   forward slash</p>

<p>&rsquo;|&rsquo;   pipe</p>

<p>The match operator is <code>=~</code>. For example,</p>

<p>line = &ldquo;Perlppp&rdquo;</p>

<pre><code>if line =~ /Perl|Python/
  puts &quot;match&quot;
end
</code></pre>

<p>The replace method is <code>sub</code> and <code>gsub</code>.</p>

<p><code>sub(pattern, str)</code> will replace the first string that matched <code>pattern</code>
with <code>str</code>.</p>

<p><code>gsub(pattern, str)</code> will replace all the string that matched <code>pattern</code>
with <code>str</code>. <code>g</code> means <strong>global</strong>.</p>

<h2 id="blocks-and-iterators">Blocks and Iterators</h2>

<p>This is a code block.</p>

<pre><code>{ puts 'Hello World!' }
</code></pre>

<p>This is also a code block.</p>

<pre><code>do
  a = 1
  puts a
end
</code></pre>

<p>When we define a function like this,</p>

<pre><code>def hello
  puts &quot;Do some staff before calling the code block&quot;
  yield
  puts &quot;Do some staff after calling the code block&quot;
end
</code></pre>

<p>now we can call this function in this way.</p>

<pre><code>hello { puts 'Hello World' }
</code></pre>

<p><code>yield</code> will execute the code block <code>{ puts 'Hello World' }</code>. Here code
is just like data. There may be many functions that should do some staff
before calling them and do some staff after calling them. For example, logging
and open/close file. This is call <a href="http://en.wikipedia.org/wiki/Aspect-oriented_programming">AOP</a>.</p>

<p><code>yield</code> can also accept parameters.</p>

<pre><code>def hello
  puts &quot;Do some staff before calling the code block&quot;
  yield('Hello ')
  puts &quot;Do some staff after calling the code block&quot;
end

hello { |greet| puts greet + 'Ruby' }
</code></pre>

<p><strong>Code block</strong> is used to implement <strong>Iterator</strong>. The famouse function <code>each</code>
is an example.</p>

<pre><code>animals = %w(ant bee cat dog)
animals.each { |animal| puts animal }
</code></pre>

<p>If we want to print 5 &lsquo;*&rsquo; in C/C++, we will do it in this way.</p>

<pre><code>for (int i = 0; i &lt; 5; ++i) {
    printf('*');
}
</code></pre>

<p>But in Ruby, you can do it in an elegant way.</p>

<pre><code>5.times { print '*' }
</code></pre>

          </div>
        </div>
        <div class="pagination">
          <a class="btn previous " href="http://zhengyhn.github.io/post/2013-06-30-ruby-getting-started/"> Prev</a>  
          <a class="btn next " href="http://zhengyhn.github.io/post/2013-08-25-some-interview-questions-about-array-and-string/"> Next</a> 
        </div>
      </div>
    </div>
    
    <div class="footer">
  <p>Powered by <a href="http://gohugo.io">Hugo</a>. This theme—Slim—is open sourced on <a href="https://github.com/zhe/hugo-theme-slim">Github</a>.</p>
</div>

  </div>
  <script src="http://zhengyhn.github.io//js/slim.js"></script>
  <script src="http://zhengyhn.github.io//js/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
  
</body>

</html>
